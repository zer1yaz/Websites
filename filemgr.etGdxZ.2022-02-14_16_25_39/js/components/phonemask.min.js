let defaultPlaceholder,numberType,phoneInput=document.querySelectorAll('input[type="tel"]');function telFocus(){defaultPlaceholder=this.placeholder,this.value.length<1&&(this.placeholder="+7 (495) ...-..-..")}function telBlur(){this.placeholder=defaultPlaceholder}function telMask(e){let t=getInputNumbers(this),n="",l=this.selectionStart;if(this.value.length===l){if(!t)return this.value="";if(["7","8","9"].indexOf(t[0])>-1){numberType="russian","9"==t[0]&&(t+=t),n=("8"==t[0]?"+8":"+7")+" (",n.length>1&&(n+=t.substring(1,4)),t.length>=5&&(n+=") "+t.substring(4,7)),t.length>=8&&(n+="-"+t.substring(7,9)),t.length>=10&&(n+="-"+t.substring(9,11))}else numberType="foreign",n="+"+t.substring(0,16);this.value=n}else e.data&&/\D/g.test(e.data)&&(this.value=t)}function getInputNumbers(e){return e.value.replace(/\D/g,"")}function telKeyDown(e){if("russian"==numberType){let t=this.selectionStart,n=this.selectionEnd;8!==e.keyCode&&46!==e.keyCode&&this.value.length>=18&&37!==e.keyCode&&39!==e.keyCode&&t==n&&(this.selectionStart=this.value.length),8!=e.keyCode||8!=t&&4!=t||1===getInputNumbers(this).length||t!=n||(this.value+="0",this.selectionStart=this.value.length),46!=e.keyCode||7!=t&&3!=t||(this.selectionStart=this.value.length),8==e.keyCode&&1==getInputNumbers(this).length&&(this.value="")}}function telPaste(e){if("russian"==numberType){let t=e.clipboardData||window.clipboardData;if(inpNumValue=getInputNumbers(this),t){let e=t.getData("text");(/\D/g.test(e)||this.value.length>=18&&!(this.selectionEnd-this.selectionStart>=e.length))&&(this.selectionStart=this.value.length)}}}phoneInput.forEach((e=>{e.addEventListener("input",telMask),e.addEventListener("keydown",telKeyDown),e.addEventListener("paste",telPaste),e.addEventListener("focus",telFocus),e.addEventListener("blur",telBlur)}));